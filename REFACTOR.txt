== Potlatch 2 refactoring ==

Aims:
- to enable multiple Maps to be shown on-screen (e.g. for junction editor)
- to bring Connection and VectorLayer code together

Current known problems:
- AttentionEvents don't work

To check:
- MapDust
- VectorLayers from GPX
- VectorLayers from shapefiles
- Save/OAuth not tested
- removeLayer in MapPaint.as should blank - does it?

== Changes overall ==

Map.as becomes a collection of MapPaint objects, all with the same lat/long/scale
(plus a backdrop sprite and a background imagery sprite)

Map.editableLayer returns a reference to the single MapPaint object where isBackground is false

MapPaint.as gains a reference to a Connection - i.e. the source data for this layer

== Code tidying ==

There are lots more of these throughout the code, marked with fixmes of the form '>>>> REFACTOR'

- remove all back-references to Map except where necessary for lat/long/scale
- getParam is messy - stuff sent via flashvars needs somewhere to live: currently in Globals which is ugly
- tileset/setbackground stuff is screwed up again and needs refactoring a little
